{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const checkbox = document.getElementById('toggleDescriptions');
        const descriptions = document.querySelectorAll('.shift-description');

        checkbox.addEventListener('change', function () {
            descriptions.forEach(description => {
                if (checkbox.checked) {
                    description.classList.remove('hidden-description');
                } else {
                    description.classList.add('hidden-description');
                }
            });
        });

        // Initialize the state based on the checkbox
        if (!checkbox.checked) {
            descriptions.forEach(description => {
                description.classList.add('hidden-description');
            });
        }
    });
</script>
{% endblock %}

<div class="d-flex justify-content-between align-items-center mb-3">
    <a href="{{ url_for('main.index', year=(calendar.year - 1) if calendar.month == 1 else calendar.year, month=12 if calendar.month == 1 else calendar.month - 1) }}"
        class="btn btn-primary">&laquo; Previo</a>
    <h2>{{ calendar.month_name }} {{ calendar.year }}</h2>
    <a href="{{ url_for('main.index', year=(calendar.year + 1) if calendar.month == 12 else calendar.year, month=1 if calendar.month == 12 else calendar.month + 1) }}"
        class="btn btn-primary">Siguiente &raquo;</a>
</div>

<div class="table-responsive">
    <table class="table table-bordered">
        <thead>
            <tr>
                {% for day in ["Lunes", "Martes", "Miércoles", "Jueves", "Viernes", "Sábado", "Domingo"] %}
                <th>{{ day }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for week in calendar.weeks %}
            <tr>
                {% for day in week %}
                <td>
                    <div class="calendar-cell">
                        <!-- Day number -->
                        <div class="calendar-day">{{ day.date.day }}</div>
                        {% if day.shift %}
                        <!-- Shift code -->
                        <div class="shift-code">{{ day.shift.code }}</div>
                        <!-- Shift description -->
                        <div class="shift-description">{{ day.shift.description }}</div>
                        {% endif %}
                    </div>
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Checkbox to toggle shift descriptions -->
<div class="form-check">
    <input class="form-check-input" type="checkbox" id="toggleDescriptions" checked>
    <label class="form-check-label" for="toggleDescriptions">
        Mostrar descripciones de turnos
    </label>
</div>